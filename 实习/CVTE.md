## cvte 后台开发
#### 项目中遇到的难题
要实现的功能：
> 团队动态

如何实现：

> 使用注解+aop

初始版本：
> 因为要根据不同的埋点操作做不同的发送处理，所以第一时间想到用if-else判断不同的请求，但这会导致很多if-else，而且之前看阿里的java开发手册说不能用超过三个if-else，后来看了项目中别人写的代码，得到了思路。

目前版本：
> 用到了策略模式，新建一个handler接口，再新建不同的处理逻辑handler（比如评论handler就是处理用户评论然后发送这个动态消息给消息中心）去实现这个handler接口，用hashmap来存储不同的埋点对应不同的发送动态信息，相当于一个工厂类，这样就实现了解耦，省去了一大串的if-else。

#### 学到的东西
- 要彻底理解需求，再去实现，比如有个需求是团队空间的更新时间要以文档或文件夹最后更新时间为准，而不仅仅是团队属性编辑的更新时间（比如更改团队名字，权限），所以我要实现的是当文件或文件夹更新时间发生变化的时候要跟团队的更新时间做一下比较，以最近的时间为准。而当时想到的文件或文件夹更新时间就是根据创建，编辑，重命名为准，但是忽略了文件的更新时间更新同时也应该触发它所在文件夹的更新时间的更新。
- 考虑实现方案要更加全面，一开始想到是当用户做了某操作，我就直接同步的发送消息动态给消息中心，但是这会增加响应时间，后来我同事就建议用消息队列，将信息先发给消息队列，然后服务端作为消费者处理，这样响应时间不会受到很大影响，同时，我消费了消息并发送给消息中心后，还可以做持久化处理，方便后序工作的优化。
